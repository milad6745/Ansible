### **ماژول‌های مهم Ansible و مقدارهای `state` آن‌ها**  
در Ansible، بسیاری از ماژول‌ها دارای مقدار `state` هستند که مشخص می‌کند چه عملی روی منابع انجام شود. در اینجا **مهم‌ترین ماژول‌ها** و مقدارهای `state` مربوط به هر یک آورده شده است:

---

## **1️⃣ ماژول `file` (مدیریت فایل‌ها و دایرکتوری‌ها)**
**کاربرد:** ایجاد، حذف و تغییر ویژگی‌های فایل‌ها و دایرکتوری‌ها.  
🔹 **مقدارهای `state`**:
- `file` → ایجاد فایل خالی (اگر وجود نداشته باشد).
- `directory` → ایجاد دایرکتوری.
- `touch` → ایجاد فایل خالی یا به‌روزرسانی زمان تغییر آن.
- `link` → ایجاد لینک نمادین (Symbolic Link).
- `hard` → ایجاد لینک سخت (Hard Link).
- `absent` → حذف فایل، دایرکتوری یا لینک.

---

## **2️⃣ ماژول `copy` (کپی کردن فایل‌ها)**
**کاربرد:** کپی کردن فایل از کنترلر به ماشین مقصد.  
🔹 **مقدارهای `state`**:
- (این ماژول مقدار `state` ندارد، اما اگر `dest` موجود باشد، فایل جایگزین می‌شود.)

---

## **3️⃣ ماژول `template` (مدیریت فایل‌های قالب Jinja2)**
**کاربرد:** کپی کردن فایل‌های قالب (`.j2`) و پردازش آن‌ها.  
🔹 **مقدارهای `state`**:
- (این ماژول مقدار `state` ندارد، اما اگر `dest` موجود باشد، فایل جایگزین می‌شود.)

---

## **4️⃣ ماژول `package` / `apt` / `yum` (مدیریت پکیج‌ها)**
**کاربرد:** نصب، حذف یا به‌روزرسانی پکیج‌های نرم‌افزاری.  
🔹 **مقدارهای `state`**:
- `present` → نصب پکیج (اگر نصب نشده باشد).
- `latest` → نصب یا به‌روزرسانی به آخرین نسخه.
- `absent` → حذف پکیج.

**📌 مثال برای `apt` (در اوبونتو و دبیان)**:
```yaml
- name: نصب پکیج Nginx
  apt:
    name: nginx
    state: present
```

**📌 مثال برای `yum` (در CentOS و RHEL)**:
```yaml
- name: حذف پکیج Apache
  yum:
    name: httpd
    state: absent
```

---

## **5️⃣ ماژول `service` (مدیریت سرویس‌ها)**
**کاربرد:** راه‌اندازی، توقف و مدیریت سرویس‌های سیستم.  
🔹 **مقدارهای `state`**:
- `started` → راه‌اندازی سرویس (اگر اجرا نشده باشد).
- `stopped` → متوقف کردن سرویس.
- `restarted` → راه‌اندازی مجدد سرویس.
- `reloaded` → بارگذاری مجدد تنظیمات سرویس (بدون ری‌استارت).

**📌 مثال:**  
```yaml
- name: راه‌اندازی سرویس Nginx
  service:
    name: nginx
    state: started
```

---

## **6️⃣ ماژول `user` (مدیریت کاربران)**
**کاربرد:** ایجاد، حذف و مدیریت کاربران در سیستم.  
🔹 **مقدارهای `state`**:
- `present` → ایجاد کاربر (اگر وجود نداشته باشد).
- `absent` → حذف کاربر.

**📌 مثال:**  
```yaml
- name: ایجاد کاربر جدید
  user:
    name: johndoe
    state: present
```

---

## **7️⃣ ماژول `group` (مدیریت گروه‌ها)**
**کاربرد:** ایجاد یا حذف گروه‌های کاربری.  
🔹 **مقدارهای `state`**:
- `present` → ایجاد گروه (اگر وجود نداشته باشد).
- `absent` → حذف گروه.

**📌 مثال:**  
```yaml
- name: ایجاد گروه developers
  group:
    name: developers
    state: present
```

---

## **8️⃣ ماژول `cron` (مدیریت زمان‌بندی وظایف)**
**کاربرد:** افزودن، حذف یا مدیریت کرون‌جاب‌ها.  
🔹 **مقدارهای `state`**:
- `present` → ایجاد یا ویرایش کرون‌جاب.
- `absent` → حذف کرون‌جاب.

**📌 مثال:**  
```yaml
- name: ایجاد یک کرون‌جاب برای اجرای اسکریپت
  cron:
    name: "Backup Script"
    job: "/usr/local/bin/backup.sh"
    minute: "0"
    hour: "2"
    state: present
```

---

## **9️⃣ ماژول `git` (مدیریت مخازن Git)**
**کاربرد:** کلون کردن، به‌روزرسانی و مدیریت مخازن Git.  
🔹 **مقدارهای `state`**:
- `present` → کلون کردن مخزن (اگر وجود نداشته باشد).
- `latest` → به‌روزرسانی مخزن به آخرین تغییرات.

**📌 مثال:**  
```yaml
- name: کلون کردن مخزن از GitLab
  git:
    repo: 'https://gitlab.com/example/repo.git'
    dest: '/opt/repo'
    version: main
    state: present
```

---

## **🔟 ماژول `docker_container` (مدیریت کانتینرهای Docker)**
**کاربرد:** اجرا، متوقف کردن و مدیریت کانتینرهای Docker.  
🔹 **مقدارهای `state`**:
- `present` → ایجاد و اجرای کانتینر.
- `started` → اجرای کانتینر (اگر از قبل ایجاد شده باشد).
- `stopped` → متوقف کردن کانتینر.
- `restarted` → ری‌استارت کردن کانتینر.
- `absent` → حذف کانتینر.

**📌 مثال:**  
```yaml
- name: اجرای یک کانتینر Nginx
  docker_container:
    name: my_nginx
    image: nginx
    state: started
    ports:
      - "80:80"
```

---

### **📌 جمع‌بندی**
| **ماژول** | **مقدارهای `state`** |
|----------|----------------|
| `file` | `file`, `directory`, `touch`, `link`, `hard`, `absent` |
| `package` / `apt` / `yum` | `present`, `latest`, `absent` |
| `service` | `started`, `stopped`, `restarted`, `reloaded` |
| `user` | `present`, `absent` |
| `group` | `present`, `absent` |
| `cron` | `present`, `absent` |
| `git` | `present`, `latest` |
| `docker_container` | `present`, `started`, `stopped`, `restarted`, `absent` |

این‌ها **مهم‌ترین ماژول‌های Ansible** همراه با مقدارهای `state` آن‌ها هستند که در اتوماسیون سرورها بسیار پرکاربردند.

